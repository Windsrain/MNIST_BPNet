# 学习总结

## 正确率分析

取batch为128，由图可知，在经过200次迭代后正确率达到91.14%，而标准python代码在经过1000次迭代后正确率才为90%左右，原因可能是C++对图像进行了二值化处理，而原python代码对图像灰度值进行的是中心化处理，所以可能二值化处理使得网络收敛更快。

## 速度分析

假设Forward和Back操作二者操作数一致，则在100次迭代中，一共对12800个训练集进行训练并对10000个测试集进行了测试，其中训练集进行了Forward和Back操作，而测试集仅进行Forward操作，则总操作为12800 * 2 + 10000 * 1 = 35600，100次迭代共用时约5小时，相当于每秒约进行两次操作。

## 优化方案

* 在只使用C++标准库时，矩阵运算只能串行，之后在引入其他库后可进行矩阵并行运算
* 在Forward中存在大量无用操作，可以考虑将一些函数改为引用参数或直接在原矩阵上进行操作，避免多于的值传参和值复制，预计完成优化后速度可至少提升两倍。
* 网络可采用数组存储，合理运用Cache的空间局部性。
* 增加保存模型和导入模型模块，在运行完成后可以存储模型权值等相关信息。

## CUDA优化

采用CUDA优化后，在batch = 200时，100次迭代大约用时1分40秒，相比于之前batch = 128，100次迭代用时5小时，加速比大约为200倍，说明CUDA优化效果显著。

之后的优化方案大概为尽量减少代码中的并行处理。